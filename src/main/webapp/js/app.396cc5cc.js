(function(t){function e(e){for(var i,o,n=e[0],l=e[1],c=e[2],p=0,d=[];p<n.length;p++)o=n[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},r={app:0},s=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0c65":function(t,e,a){},"0fe1":function(t,e,a){"use strict";a("c1b5")},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"nav"}},[e("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),e("router-link",{attrs:{to:"/signup"}},[t._v("Signup")]),t._v("| "),e("router-link",{attrs:{to:"/login"}},[t._v("Login")]),t._v(" | "),e("router-link",{attrs:{to:"/trips"}},[t._v("Trips")]),t._v(" | "),e("input",{attrs:{type:"button",value:"Logout"},on:{click:function(e){return e.preventDefault(),t.logout()}}})],1),e("router-view")],1)},s=[],o=a("bc3a"),n=a.n(o),l=a("db49"),c=a.n(l),u=()=>n.a.create({baseURL:c.a.backend_url,headers:{Authorization:"Bearer "+localStorage.token,"Access-Control-Allow-Origin":"*"}});const p="/user";var d={login(t){return u().post(p+"/login",t)},register(t){return u().post(p+"/signup",t)},getAllUsers(){return u().get(p)},getUser(t){return u().get(p+"/"+t)},deleteUser(t){return u().delete(p+"/"+t)},logout(){return u().delete(p+"/logout")}},m={name:"navbar",components:{},data:function(){return{}},methods:{logout:async function(){const t=await d.logout();console.log(t),200!=t.status?alert("Non sono riuscito a fare logout"):(localStorage.setItem("token",null),localStorage.setItem("isAuthenticated",!1))}},mounted:function(){}},v=m,g=(a("d40e"),a("2877")),f=Object(g["a"])(v,r,s,!1,null,null,null),b=f.exports,h=a("8c4f"),_=a("130e"),y=function(){var t=this;t._self._c;return t._m(0)},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[t._v("Visualizza i miei viaggi")]),e("div",{staticClass:"col"},[t._v("Aggiungi un viaggio")]),e("div",{staticClass:"col"},[t._v("informazione account")])])])}],C={name:"Home",components:{}},x=C,D=Object(g["a"])(x,y,w,!1,null,null,null),T=D.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("section",{staticClass:"background-radial-gradient overflow-hidden"},[e("div",{staticClass:"container px-4 py-5 px-md-5 text-center text-lg-start my-5"},[e("div",{staticClass:"row gx-lg-5 align-items-center mb-5"},[t._m(0),e("div",{staticClass:"col-lg-6 mb-5 mb-lg-0 position-relative"},[e("div",{staticClass:"position-absolute rounded-circle shadow-5-strong",attrs:{id:"radius-shape-1"}}),e("div",{staticClass:"position-absolute shadow-5-strong",attrs:{id:"radius-shape-2"}}),e("div",{staticClass:"card bg-glass"},[e("div",{staticClass:"card-body px-4 py-5 px-md-5"},[e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 mb-4"},[e("div",{staticClass:"form-outline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"form-control",attrs:{type:"text",id:"firstname"},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"firstname"}},[t._v("First name")])])]),e("div",{staticClass:"col-md-6 mb-4"},[e("div",{staticClass:"form-outline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"}],staticClass:"form-control",attrs:{type:"text",id:"lastname"},domProps:{value:t.lastname},on:{input:function(e){e.target.composing||(t.lastname=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"lastname"}},[t._v("Last name")])])])]),e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email address")])]),e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"username"}},[t._v("Username")])]),e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"form3Example4"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"form3Example4"}},[t._v("Password")])]),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary btn-block mb-4",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.signup()}}},[t._v(" Sign up ")])]),t._v(" Go to "),e("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1)])])])])])])])},k=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-6 mb-5 mb-lg-0",staticStyle:{"z-index":"10"}},[e("h1",{staticClass:"my-5 display-5 fw-bold ls-tight",staticStyle:{color:"hsl(218, 81%, 95%)"}},[t._v(" Il tuo diario dei viaggi "),e("br"),e("span",{staticStyle:{color:"hsl(218, 81%, 75%)"}},[t._v("Ti accompagna in tutti i viaggi")])]),e("p",{staticClass:"mb-4 opacity-70",staticStyle:{color:"hsl(218, 81%, 85%)"}},[t._v(" “Un viaggio non inizia nel momento in cui partiamo né finisce nel momento in cui raggiungiamo la meta. I realtà comincia molto prima e non finisce mai, dato che il nastro dei ricordi continua a scorrerci dentro anche dopo che ci siamo fermati. È il virus del viaggio, malattia sostanzialmente incurabile” Ryszard Kapuscinski ")])])}],I={name:"Signup",components:{},data:function(){return{firstname:null,lastname:null,email:null,username:null,password:null}},methods:{signup:async function(){const t={firstname:this.firstname,lastname:this.lastname,email:this.email,username:this.username,password:this.password},e=await d.register(t);console.log(e),200!=e.status?alert("Non è stato possibile registrarsi"):(localStorage.setItem("token",e.data.authorization),localStorage.setItem("isAuthenticated",!0))}},mounted:function(){}},O=I,N=(a("0fe1"),Object(g["a"])(O,S,k,!1,null,"38a07a39",null)),P=N.exports,z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("section",{staticClass:"background-radial-gradient overflow-hidden"},[e("div",{staticClass:"container px-4 py-5 px-md-5 text-center text-lg-start my-5"},[e("div",{staticClass:"row gx-lg-5 align-items-center mb-5"},[t._m(0),e("div",{staticClass:"col-lg-6 mb-5 mb-lg-0 position-relative"},[e("div",{staticClass:"position-absolute rounded-circle shadow-5-strong",attrs:{id:"radius-shape-1"}}),e("div",{staticClass:"position-absolute shadow-5-strong",attrs:{id:"radius-shape-2"}}),e("div",{staticClass:"card bg-glass"},[e("div",{staticClass:"card-body px-4 py-5 px-md-5"},[e("form",[e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"username"}},[t._v("Username")])]),e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"form3Example4"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("label",{staticClass:"form-label",attrs:{for:"form3Example4"}},[t._v("Password")])]),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary btn-block mb-4",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.login()}}},[t._v(" login ")])]),t._v(" Go to "),e("router-link",{attrs:{to:"/signup"}},[t._v("Signup")])],1)])])])])])])])},j=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-6 mb-5 mb-lg-0",staticStyle:{"z-index":"10"}},[e("h1",{staticClass:"my-5 display-5 fw-bold ls-tight",staticStyle:{color:"hsl(218, 81%, 95%)"}},[t._v(" Il tuo diario dei viaggi "),e("br"),e("span",{staticStyle:{color:"hsl(218, 81%, 75%)"}},[t._v("Ti accompagna in tutti i viaggi")])]),e("p",{staticClass:"mb-4 opacity-70",staticStyle:{color:"hsl(218, 81%, 85%)"}},[t._v(" “Un viaggio non inizia nel momento in cui partiamo né finisce nel momento in cui raggiungiamo la meta. I realtà comincia molto prima e non finisce mai, dato che il nastro dei ricordi continua a scorrerci dentro anche dopo che ci siamo fermati. È il virus del viaggio, malattia sostanzialmente incurabile” Ryszard Kapuscinski ")])])}],A={name:"Login",components:{},data:function(){return{username:null,password:null}},methods:{login:async function(){const t={username:this.username,password:this.password},e=await d.login(t);console.log(e),200!=e.status?alert("credenziali sbagliate"):(localStorage.setItem("token",e.data.authorization),localStorage.setItem("isAuthenticated",!0))}},mounted:function(){}},L=A,M=(a("5703"),Object(g["a"])(L,z,j,!1,null,"9c4e79cc",null)),U=M.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("div",{staticClass:"container"},[e("h2",[t._v("Viaggio a: "+t._s(t.trip.name))]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("router-link",{attrs:{to:{name:"trips"}}},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v(" Indietro ")])])],1),e("div",{staticClass:"col"}),e("div",{staticClass:"col"},[t.editmode?e("input",{attrs:{type:"button",value:"Modifica"},on:{click:function(e){return e.preventDefault(),t.editTrip()}}}):t._e(),t.editmode?t._e():e("input",{attrs:{type:"button",value:"Aggiungi"},on:{click:function(e){return e.preventDefault(),t.addTrip()}}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("label",{attrs:{for:"name"}},[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.trip.name,expression:"trip.name"}],attrs:{id:"name",type:"text"},domProps:{value:t.trip.name},on:{input:function(e){e.target.composing||t.$set(t.trip,"name",e.target.value)}}})]),e("div",{staticClass:"col"},[e("label",{attrs:{for:"tripDate"}},[t._v("tripDate")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.trip.tripDate,expression:"trip.tripDate"}],attrs:{id:"tripDate",type:"date"},domProps:{value:t.trip.tripDate},on:{input:function(e){e.target.composing||t.$set(t.trip,"tripDate",e.target.value)}}})]),e("div",{staticClass:"col"},[e("label",{attrs:{for:"vehicle"}},[t._v("vehicle")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.trip.vehicle,expression:"trip.vehicle"}],attrs:{id:"vehicle",type:"text"},domProps:{value:t.trip.vehicle},on:{input:function(e){e.target.composing||t.$set(t.trip,"vehicle",e.target.value)}}})])])]),e("br"),e("l-map",{ref:"myMap",staticStyle:{height:"500px"},attrs:{zoom:t.zoom,center:t.center,drawControl:t.drawControl},on:{ready:function(e){return t.setUpTheMap()}}},[e("l-draw"),e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),e("l-feature-group",{ref:"features"}),e("l-geo-json",{attrs:{geojson:t.geojson}})],1),e("br"),e("br"),e("label",{attrs:{for:"id"}},[t._v("id")]),e("br"),t._v(" "+t._s(t.trip.id)+" "),e("br"),e("label",{attrs:{for:"name"}},[t._v("Name")]),e("br"),t._v(" "+t._s(t.trip.name)+" "),e("br"),e("label",{attrs:{for:"tripDate"}},[t._v("tripDate")]),e("br"),t._v(" "+t._s(t.trip.tripDate)+" "),e("br"),e("label",{attrs:{for:"vehicle"}},[t._v("vehicle")]),e("br"),t._v(" "+t._s(t.trip.vehicle)+" "),e("br"),e("label",{attrs:{for:"path"}},[t._v("path")]),e("br"),t._v(" "+t._s(t.trip.path)+" "),e("br"),e("label",{attrs:{for:"mainStages"}},[t._v("mainStages")]),e("br"),t._v(" "+t._s(t.trip.mainStages)+" "),e("br"),e("label",{attrs:{for:"user"}},[t._v("user")]),e("br"),t._v(" "+t._s(t.trip.user)+" "),e("br"),e("br")],1)])},G=[],J=a("2699"),$=a("a40a"),B=a("c5ca"),F=a("044a");const R="/trip";var Y={getAllTrips(){return u().get(R)},getTripByID(t){return u().get(R+"/"+t)},getAllTripsByDate(t){return u().get(R+"?date="+t)},createTrip(t){return u().post(R,t)},updateTrip(t,e){return u().put(R+"/"+t,e)},deleteTrip(t){return u().delete(R+"/"+t)}},H=a("e11e"),K=a.n(H),V=a("20d6"),W=a.n(V),q={name:"Trip",components:{LMap:J["a"],LTileLayer:$["a"],LFeatureGroup:B["a"],LDraw:W.a,LGeoJson:F["a"]},data(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:[45.6495,13.7768],editmode:!1,drawControl:!0,geojson:{},drawnItems:null,trip:{id:1,name:"dasads",tripDate:null,vehicle:null,path:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[13.771482,45.64952],[13.786202,45.65027],[13.786288,45.64772],[13.792726,45.65069]]}}]},mainStages:null}}},methods:{loadTrip:async function(t){const e=await Y.getTripByID(t);200==e.status&&(this.trip=e.data)},addTrip:async function(){this.trip.path=this.drawnItems.toGeoJSON();const t=await Y.createTrip(this.trip);this.trip=t.data},editTrip:async function(){this.trip.path=this.drawnItems.toGeoJSON();const t=await Y.updateTrip(this.trip.id,this.trip);this.trip=t.data},setUpTheMap(){let t=this.$refs.myMap.mapObject;var e=new K.a.FeatureGroup;t.addLayer(e),this.drawnItems=e;var a=new K.a.Control.Draw({draw:{polygon:!1,circle:!1,rectangle:!1,circlemarker:!1},edit:{featureGroup:e}});function i(t,a){e.addLayer(a)}t.addControl(a),K.a.control.layers({},{drawlayer:e},{position:"topleft",collapsed:!1}).addTo(t),t.on(K.a.Draw.Event.CREATED,(function(t){var a=t.layer;e.addLayer(a)})),null!=this.trip.path&&K.a.geoJson(this.trip.path,{onEachFeature:i}),t.on("draw:editstop"),t.on("draw:drawstop")},setPath(){this.trip.path=localStorage.geoJson,this.loadGeoJSON(JSON.parse(this.trip.path))}},created:async function(){"tripID"in this.$route.params&&null!=this.$route.params.tripID?(this.editmode=!0,await this.loadTrip(Number(this.$route.params.tripID)),this.trip.id=Number(this.$route.params.tripID)):this.editmode=!1}},Q=q,X=Object(g["a"])(Q,E,G,!1,null,null,null),Z=X.exports,tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("div",{staticClass:"container"},[e("h2",[t._v("I miei viaggi")]),e("router-link",{attrs:{to:{name:"trip"}}},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v("Inserisci viaggio")])]),e("br"),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchDate,expression:"searchDate"}],attrs:{type:"date"},domProps:{value:t.searchDate},on:{input:[function(e){e.target.composing||(t.searchDate=e.target.value)},function(e){return t.getAllTripsByDate()}]}}),t._v(" "+t._s(t.searchDate)+" "),e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.trips,(function(a){return e("tr",{key:a.id},[e("th",{attrs:{scope:"row"}},[e("router-link",{attrs:{to:{name:"trip",params:{tripID:a.id}}}},[t._v(t._s(a.id))])],1),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(t._f("moment")(a.tripDate,"DD/MM/YYYY")))]),e("td",[e("router-link",{attrs:{to:{name:"trip",params:{tripID:a.id}}}},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[e("b-icon-pencil")],1)]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteTrip(a.id)}}},[e("b-icon-trash")],1)],1)])})),0)])],1)])},et=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("ID")]),e("th",{attrs:{scope:"col"}},[t._v("Nome viaggio")]),e("th",{attrs:{scope:"col"}},[t._v("Data viaggio")]),e("th",{attrs:{scope:"col"}},[t._v("Azioni")])])])}],at={name:"Trips",components:{},data(){return{trips:[{id:1,name:"adda",tripDate:"2022-08-06"},{id:2,name:"adddsaa",tripDate:"2022-12-10"},{id:3,name:"a131dda",tripDate:"2022-08-15"}],searchDate:null}},methods:{loadTrip:async function(){const t=await Y.getAllTrips();console.log(t),200==t.status&&(this.trips=t.data)},deleteTrip:async function(t){if(confirm("Do you really want to delete this Trip?")){const e=await Y.deleteTrip(t);200==e.status?alert("The Trip is deleted"):alert("Can't delete the Trip")}},getAllTripsByDate:async function(){const t=await Y.getAllTripsByDate(this.searchDate);this.trips=t.data}},mounted:async function(){await this.loadTrip()}},it=at,rt=Object(g["a"])(it,tt,et,!1,null,null,null),st=rt.exports;const ot=(t,e,a)=>{if(null===localStorage.getItem("isAuthenticated"))a("/login");else{const t=localStorage.getItem("isAuthenticated");if("true"==t)return a()}};i["default"].use(h["a"]),i["default"].use(_["a"],n.a);const nt=[{path:"/",name:"Home",component:T},{path:"/signup",name:"signup",component:P},{path:"/login",name:"login",component:U},{path:"/trip",name:"trip",component:Z,beforeEnter:ot},{path:"/trip/:tripID",name:"trip",component:Z,beforeEnter:ot},{path:"/trips",name:"trips",component:st,beforeEnter:ot}],lt=new h["a"]({mode:"history",base:"/",routes:nt});var ct=lt,ut=a("1e18"),pt=(a("2dd8"),a("f9e3"),a("4e2b"));a("6cc5"),a("5fbf");i["default"].use(a("2ead")),i["default"].use(ut["a"]),i["default"].use(ut["b"]),i["default"].component("l-map",J["a"]),i["default"].component("l-tile-layer",$["a"]),i["default"].component("l-marker",pt["a"]),delete H["Icon"].Default.prototype._getIconUrl,H["Icon"].Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),i["default"].config.productionTip=!1,new i["default"]({router:ct,render:t=>t(b)}).$mount("#app")},5703:function(t,e,a){"use strict";a("cc69")},c1b5:function(t,e,a){},cc69:function(t,e,a){},d40e:function(t,e,a){"use strict";a("0c65")},db49:function(t,e){const a={local:"http://localhost:8080/ProgrammazioneWebMattiaBressanEsame/api"};t.exports={backend_url:a.local}}});
//# sourceMappingURL=app.396cc5cc.js.map